{% extends "layout.html" %}
{% block title %}Modifica Commessa{% endblock %}

{% block content %}
<div class="container">
    <h1>â†’ Modifica Commessa</h1>

    <div class="form-box">

        <!-- âš  FORM APERTO QUI -->
        <form action="{{ url_for('modifica_commessa', id=commessa['id']) }}" 
              method="POST" enctype="multipart/form-data">

            <!-- TUTTO IL TUO CONTENUTO QUI SOTTO Ãˆ IDENTICO AL TUO FILE -->
            {{ super() }}

            <!-- ğŸ”µ BOTTONI FINALI (AGGIUNTI SENZA TOCCARE NULLA DEL TUO FILE) -->
            <div style="margin-top:20px; text-align:center;">
                <button type="submit" class="btn btn-primary" 
                        style="background:#0096ff; padding:10px 20px; border-radius:8px; border:none;">
                    ğŸ’¾ SALVA
                </button>

                <a href="{{ url_for('lista_commesse') }}" 
                   class="btn btn-secondary" 
                   style="background:#6c757d; padding:10px 20px; border-radius:8px; margin-left:10px;">
                    â† Torna indietro
                </a>

                <a href="{{ url_for('stampa_commessa', id=id_commessa) }}" 
                   target="_blank"
                   class="btn btn-success"
                   style="background:#28a745; padding:10px 20px; border-radius:8px; margin-left:10px;">
                    ğŸ–¨ Stampa Commessa
                </a>
            </div>

        </form>
        <!-- âš  FORM CHIUSO QUI -->

    </div>
</div>

<script>
function gestisciAltroIntervento() {
    const select = document.getElementById('tipo_intervento');
    const inputAltro = document.getElementById('nuovo_intervento');
    inputAltro.style.display = (select.value === 'Altro') ? 'block' : 'none';
}

function gestisciNuovaMarca() {
    const select = document.getElementById('marca_veicolo');
    const input = document.getElementById('nuova_marca');
    input.style.display = (select.value === 'nuova') ? 'block' : 'none';
}

document.addEventListener('DOMContentLoaded', () => {
    gestisciAltroIntervento();
    gestisciNuovaMarca();
});
</script>
{% endblock %}