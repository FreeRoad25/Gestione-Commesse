{% extends "layout.html" %}
{% block title %}Archivio Commesse Consegnate{% endblock %}

<style>
/* === FIX DEFINITIVO ALTEZZA RIGHE TABELLA ARCHIVIO === */

.table-archivio {
    display: table !important;
    width: 100% !important;
    border-collapse: collapse !important;
    margin: 0 !important;
    padding: 0 !important;
}

/* righe */
.table-archivio tr {
    display: table-row !important;
    height: 26px !important;
}

/* celle */
.table-archivio th,
.table-archivio td {
    display: table-cell !important;
    padding: 3px 6px !important;
    margin: 0 !important;
    height: 26px !important;
    max-height: 26px !important;
    line-height: 16px !important;
    font-size: 13px !important;
    color: #e0e0e0 !important;
    background: rgba(0, 0, 0, 0.25) !important;
    vertical-align: middle !important;
    border: none !important;
    overflow: hidden !important;
}

/* header */
.table-archivio th {
    background-color: #00bfff !important;
    color: #ffffff !important;
}

/* righe alternate */
.table-archivio tr:nth-child(even) {
    background-color: #26283a !important;
}

/* evidenzia NON saldate */
.riga-non-saldata {
    background-color: #7a1f1f !important;
}

/* reset min-height da stili globali */
.table-archivio td *,
.table-archivio th * {
    min-height: 0 !important;
    height: auto !important;
}
</style>

{% block content %}
<div class="content-wrapper">
    <h1>üìÅ Archivio Commesse Consegnate</h1>

    <table class="table-archivio">
        <thead>
            <tr>
                <th>Nome</th>
                <th>Tipo Intervento</th>
                <th>Data Conferma</th>
                <th>Data Arrivo Materiali</th>
                <th>Data Consegna</th>
                <th>Ore Previste</th>
                <th>Ore Lavorate</th>
                <th>Saldata</th>
                <th>Azione</th>
            </tr>
        </thead>

        <tbody>
            {% for c in commesse %}
            <tr class="{% if c.saldata == 'No' %}riga-non-saldata{% endif %}">
                <td>{{ c.nome }}</td>
                <td>{{ c.tipo_intervento }}</td>
                <td>{{ c.data_conferma }}</td>
                <td>{{ c.data_arrivo_materiali }}</td>
                <td>{{ c.data_consegna }}</td>
                <td>{{ c.ore_previste }}</td>
                <td>{{ c.ore_lavorate }}</td>
                <td>{{ c.saldata }}</td>

                <td>
                    <form action="{{ url_for('toggle_saldata', id=c.id) }}" method="POST">
                        <button class="btn btn-sm btn-primary">Cambia</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}